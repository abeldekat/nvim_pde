local Util = require("ak.util")
local MiniDeps = require("mini.deps")
local add, now, later = MiniDeps.add, MiniDeps.now, MiniDeps.later

later(function()
  add("dstein64/vim-startuptime", { bang = true })
  Util.defer.on_keys(function()
    now(function()
      add("dstein64/vim-startuptime")
      require("ak.config.util.startuptime")
    end)
  end, "<leader>ms", "StartupTime")

  add("jpalardy/vim-slime", { bang = true })
  Util.defer.on_keys(function()
    now(function()
      add("jpalardy/vim-slime")
      require("ak.config.util.slime")
    end)
  end, "<leader>mr", "Repl")

  -- add("folke/persistence.nvim", { bang = true })
  -- Util.defer.on_events(function()
  --   now(function()
  --     add("persistence.nvim")
  --     require("ak.config.persistence")
  --   end)
  -- end, "BufReadPre")
end)
